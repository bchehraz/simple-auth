{"version":3,"sources":["webpack:///./src/components/Details.js","webpack:///./src/components/Home.js","webpack:///./src/components/Form/index.js","webpack:///./src/components/Login.js","webpack:///./src/components/PrivateRoute.js","webpack:///./src/pages/app.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/components/View/index.js","webpack:///./src/utils/auth.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/Header/index.js","webpack:///./src/components/Layout/index.js","webpack:///./src/components/Status/index.js"],"names":["Details","_getCurrentUser","getCurrentUser","name","legalName","email","react_default","a","createElement","View","title","Home","Form","_ref","handleSubmit","handleUpdate","className","styles","form","method","onSubmit","event","navigate","type","onChange","value","Login","state","username","password","_this$setState","this","setState","target","preventDefault","handleLogin","render","_this2","isLoggedIn","e","React","Component","PrivateRoute","component","location","rest","_objectWithoutPropertiesLoose","pathname","App","Layout","Status","es","components_PrivateRoute","path","components_Login","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","gatsby_link__WEBPACK_IMPORTED_MODULE_1__","gatsby_link__WEBPACK_IMPORTED_MODULE_1___default","d","__webpack_exports__","loader","enqueue","createContext","m","module","exports","require","default","_view_module_css__WEBPACK_IMPORTED_MODULE_1__","_view_module_css__WEBPACK_IMPORTED_MODULE_1___default","children","view","logout","isBrowser","window","getUser","localStorage","gatsbyUser","JSON","parse","setUser","user","stringify","console","log","callback","ProdPageRenderer","pageResources","InternalPageRenderer","Object","assign","json","Header","header","gatsby_browser_entry","to","role","Helmet","components_Header","main","details","react__WEBPACK_IMPORTED_MODULE_1___default","href","onClick","_reach_router__WEBPACK_IMPORTED_MODULE_2__","status"],"mappings":"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","file":"component---src-pages-app-js-d4aedbc41b1f2a4bee26.js","sourcesContent":["import React from \"react\"\nimport View from \"./View\"\nimport { getCurrentUser } from \"../utils/auth\"\n\nconst Details = () => {\n  const { name, legalName, email } = getCurrentUser()\n\n  return (\n    <View title=\"Your Details\">\n      <ul>\n        <li>Preferred name: {name}</li>\n        <li>Legal name: {legalName}</li>\n        <li>Email address: {email}</li>\n      </ul>\n    </View>\n  )\n}\n\nexport default Details\n","import React from \"react\"\nimport View from \"./View\"\nimport { getCurrentUser } from \"../utils/auth\"\n\nconst Home = () => {\n  const { name } = getCurrentUser()\n\n  return (\n    <View title=\"Your Profile\">\n      <p>Welcome back, {name}!</p>\n    </View>\n  )\n}\n\nexport default Home\n","import React from \"react\"\nimport styles from \"./form.module.css\"\nimport { navigate } from \"@reach/router\"\n\nexport default ({ handleSubmit, handleUpdate }) => (\n  <form\n    className={styles.form}\n    method=\"post\"\n    onSubmit={event => {\n      handleSubmit(event)\n      navigate(`/app/profile`)\n    }}\n  >\n    <p className={styles[`form__instructions`]}>\n      For this demo, please log in with the username <code>gatsby</code> and the\n      password <code>demo</code>.\n    </p>\n    <label className={styles[`form__label`]}>\n      Username\n      <input\n        className={styles[`form__input`]}\n        type=\"text\"\n        name=\"username\"\n        onChange={handleUpdate}\n      />\n    </label>\n    <label className={styles[`form__label`]}>\n      Password\n      <input\n        className={styles[`form__input`]}\n        type=\"password\"\n        name=\"password\"\n        onChange={handleUpdate}\n      />\n    </label>\n    <input className={styles[`form__button`]} type=\"submit\" value=\"Log In\" />\n  </form>\n)\n","import React from \"react\"\nimport { navigate } from \"gatsby\"\nimport Form from \"./Form\"\nimport View from \"./View\"\nimport { handleLogin, isLoggedIn } from \"../utils/auth\"\n\nclass Login extends React.Component {\n  state = {\n    username: ``,\n    password: ``,\n  }\n\n  handleUpdate(event) {\n    this.setState({\n      [event.target.name]: event.target.value,\n    })\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    handleLogin(this.state)\n  }\n\n  render() {\n    if (isLoggedIn()) {\n      navigate(`/app/profile`)\n    }\n\n    return (\n      <View title=\"Log In\">\n        <Form\n          handleUpdate={e => this.handleUpdate(e)}\n          handleSubmit={e => this.handleSubmit(e)}\n        />\n      </View>\n    )\n  }\n}\n\nexport default Login\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { navigate } from \"gatsby\"\nimport { isLoggedIn } from \"../utils/auth\"\n\nconst PrivateRoute = ({ component: Component, location, ...rest }) => {\n  if (!isLoggedIn() && location.pathname !== `/app/login`) {\n    // If we’re not logged in, redirect to the home page.\n    navigate(`/app/login`)\n    return null\n  }\n\n  return <Component {...rest} />\n}\n\nPrivateRoute.propTypes = {\n  component: PropTypes.any.isRequired,\n}\n\nexport default PrivateRoute\n","import React from \"react\"\nimport { Router } from \"@reach/router\"\nimport Layout from \"../components/Layout\"\nimport Details from \"../components/Details\"\nimport Home from \"../components/Home\"\nimport Login from \"../components/Login\"\nimport PrivateRoute from \"../components/PrivateRoute\"\nimport Status from \"../components/Status\"\n\nconst App = () => (\n  <Layout>\n    <Status />\n    <Router>\n      <PrivateRoute path=\"/app/profile\" component={Home} />\n      <PrivateRoute path=\"/app/details\" component={Details} />\n      <Login path=\"/app/login\" />\n    </Router>\n  </Layout>\n)\n\nexport default App;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport loader from \"./loader\"\n\nconst prefetchPathname = loader.enqueue\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n  prefetchPathname,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport styles from \"./view.module.css\"\n\nconst View = ({ title, children }) => (\n  <section className={styles.view}>\n    <h1 className={styles[`view__heading`]}>{title}</h1>\n    {children}\n  </section>\n)\n\nView.propTypes = {\n  title: PropTypes.string.isRequired,\n}\n\nexport default View\n","const isBrowser = typeof window !== `undefined`\n\nconst getUser = () =>\n  window.localStorage.gatsbyUser\n    ? JSON.parse(window.localStorage.gatsbyUser)\n    : {}\n\nconst setUser = user => (window.localStorage.gatsbyUser = JSON.stringify(user))\n\nexport const handleLogin = ({ username, password }) => {\n  if (!isBrowser) return false\n\n  if (username === `gatsby` && password === `demo`) {\n    console.log(`Credentials match! Setting the active user.`)\n    return setUser({\n      name: `Jim`,\n      legalName: `James K. User`,\n      email: `jim@example.org`,\n    })\n  }\n\n  return false\n}\n\nexport const isLoggedIn = () => {\n  if (!isBrowser) return false\n\n  const user = getUser()\n\n  return !!user.email\n}\n\nexport const getCurrentUser = () => isBrowser && getUser()\n\nexport const logout = callback => {\n  if (!isBrowser) return\n\n  console.log(`Ensuring the \\`gatsbyUser\\` property exists.`)\n  setUser({})\n  callback()\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport styles from \"./header.module.css\"\n\nconst Header = () => (\n  <header className={styles.header}>\n    <div className={styles[`header__wrap`]}>\n      <h1 className={styles[`header__heading`]}>\n        <Link\n          to=\"/\"\n          className={`${styles[`header__link`]} ${\n            styles[`header__link--home`]\n          }`}\n        >\n          Gatsby Profiles\n        </Link>\n      </h1>\n      <nav role=\"main\" className={styles[`header__nav`]}>\n        <Link to=\"/\" className={styles[`header__link`]}>\n          Home\n        </Link>\n        <Link to=\"/app/profile\" className={styles[`header__link`]}>\n          Profile\n        </Link>\n        <Link to=\"/app/details\" className={styles[`header__link`]}>\n          Details\n        </Link>\n      </nav>\n    </div>\n  </header>\n)\n\nexport default Header\n","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nimport Header from \"../Header\"\n\n// Global styles and component-specific styles.\nimport \"./global.css\"\nimport styles from \"./main.module.css\"\n\nconst Layout = ({ children }) => (\n  <div>\n    <Helmet title=\"Event/Booking + Email Authentication + GraphQL + MongoDB\" />\n    <Header />\n    <main className={styles.main}>{children}</main>\n  </div>\n)\n\nexport default Layout\n","import React from \"react\"\nimport { Link, navigate } from \"@reach/router\"\nimport { getCurrentUser, isLoggedIn, logout } from \"../../utils/auth\"\nimport styles from \"./status.module.css\"\n\nexport default () => {\n  let details\n  if (!isLoggedIn()) {\n    details = (\n      <p className={styles[`status__text`]}>\n        To get the full app experience, you’ll need to\n        {` `}\n        <Link to=\"/app/login\">log in</Link>.\n      </p>\n    )\n  } else {\n    const { name, email } = getCurrentUser()\n\n    details = (\n      <p className={styles[`status__text`]}>\n        Logged in as {name} ({email}\n        )!\n        {` `}\n        <a\n          href=\"/\"\n          onClick={event => {\n            event.preventDefault()\n            logout(() => navigate(`/app/login`))\n          }}\n        >\n          log out\n        </a>\n      </p>\n    )\n  }\n\n  return <div className={styles.status}>{details}</div>\n}\n"],"sourceRoot":""}